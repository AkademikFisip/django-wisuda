{% load static %}
{% if messages %}
    <div class="messages">
        {% for message in messages %}
            <div class="alert {{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Pendaftaran - Sistem Pendaftaran Wisuda</title>
    <link rel="stylesheet" href="{% static 'css/register.css' %}">
    <script defer src="{% static 'js/main.js' %}"></script>
</head>
    <div id="popup-message" class="popup hidden">
        <p id="popup-text">Akun berhasil dibuat. Anda dapat login sekarang.</p>
        <button id="close-popup" onclick="closePopup()">Tutup</button>
    </div>
<body>
    <header>
        <img src="{% static 'images/logo_unila.png' %}" alt="Logo Universitas Lampung">
        <div class="header-text">
            <h1>Sistem Pendaftaran Wisuda</h1>
            <h2>Fakultas Ilmu Sosial dan Ilmu Politik</h2>
        </div>
    </header>   
    <main class="main-content">
        <div class="image-section">
            <img src="{% static 'images/fisip.jpg' %}" alt="Gambar FISIP" class="kampus-image">
        </div>
        <div class="form-section">
            <h3>FORM PENDAFTARAN</h3>
            <form method="post">
                {% csrf_token %}
                <label for="nama_lengkap">Nama Lengkap:</label>
                <input type="text" id="username" name="username" placeholder="Masukkan Nama Lengkap" required>
            
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" placeholder="Masukkan Email" required>
            
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" placeholder="Masukkan Password" required>
            
                <button type="submit" class="btn-submit">Daftar</button>
                <a href="{% url 'pendaftaran:login' %}" class="btn-login">Silakan Login jika sudah daftar</a>
            </form>
        </div>
    </main>
        <!-- Script -->
        <script>
            function showPopup(message) {
                const popup = document.getElementById('popup-message');
                const popupText = document.getElementById('popup-text');
                popupText.textContent = message; // Masukkan pesan ke popup
                popup.classList.remove('hidden'); // Tampilkan popup
            }
    
            function closePopup() {
                const popup = document.getElementById('popup-message');
                popup.classList.add('hidden'); // Sembunyikan popup
            }
    
            document.addEventListener('DOMContentLoaded', () => {
                console.log('DOM Loaded');
                {% if messages %}
                    console.log('Messages found:', {{ messages|safe }});
                    {% for message in messages %}
                        console.log('Showing message:', "{{ message|escapejs|safe }}");
                        showPopup("{{ message|escapejs|safe }}");
                    {% endfor %}
                {% else %}
                    console.log('No messages found');
                {% endif %}
            });
        </script>
    <footer class="footer">
        <p>&copy; 2025 Universitas Lampung - Fakultas Ilmu Sosial dan Ilmu Politik</p>
    </footer>
</body>
</html>
